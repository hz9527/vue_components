## 使用方法
### 目录
[返回首页](../../../../../ReadMe.md)  
[描述](#描述)  
[数据解构](#数据解构)  
[动态校验](#动态校验)  
[联动列表](#联动列表)  
[属性](#属性)  
[事件监听](#事件监听)  
### 描述
picker组件类似桌面端的下拉框，一般使用场景如选择列表（选择时间，选择地点）  
选择时间主要可能存在选择时间段，那么意味着可能有校验  
选择地点一般具有一定层级关系，如北京－朝阳－北园家园  
当然，在设计组件时都考虑了这些业务场景和可拓展性
### 数据解构
本组件最重要的属性itemList属性了，该属性是一个数组，用于决定picker每一列显示什么，并根据其在数组中的排序
```JavaScript
[
  {
    flex: 3,
    values: ['2010年', '2011年', '2012年', '2013年', '2014年', '2015年', '2017年', '2018年']
  },
  {
    flex: 1,
    content: '-',
    align: 'left'
  },
  {
    flex: 2,
    defaultIndex: 1
    values: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']
  }
]
```
1. 首先列表会分成三列，依次是年 ‘－’ 月
2. 列表的空间分配会按照flex值的比例进行，默认为1(如果设为0也会使用1)
3. 年和月列表是可以滑动的，‘－’则不行，作为分隔符存在，我们将可以滑动的列称为值列，分隔符称为分割列
4. 值列的识别将优先于分割列，虽然正常的调用者不会同时为某一项设置values属性和content属性
5. defaultIndex值为数字，表示当前列表默认展示项下标，默认为0
6. align为文字对其方式，枚举方式参考css text－align
7. 备注： 因为使用了scoped，因此暂时不支持自定义class，content支持html文本如content: '<span>:</span>'
以上是非联动列表的数据解构，为了降低调用者的学习成本，在整体数据解构上，联动列表基本与此一致，先看示例吧

```JavaScript
[
  {
    flex: 3,
    name: 'province',
    values: ['湖北', '北京', '四川']
  },
  {
    content: '-',
  },
  {
    parentName: 'province'
    name: {
      '湖北': 'hubei',
      '北京': 'beijing',
      '四川': 'sichuang'
    },
    defaultIndex{
      '湖北': 1,
      '北京': 0,
      '四川': 2
    },
    values:[
      '湖北': ['武汉', '宜昌', '黄冈'],
      '北京': ['朝阳', '海淀', '东城'],
      '四川': ['成都', '阆中', '乐山']
    ]
  },
  {
    parentName: 'hubei',
    values:{
      '武汉': ['武昌', '汉口', '江汉'],
      '宜昌': ['长阳', '兴山', '秭归'],
      '黄冈': ['黄州', '罗田', '团风']
    }
  }......
]
```
1. 显然，联动列表中列表长度可能小于picker列长度，因为一个列表可能存在多个子列表
2. 数据整体为一个数组对应一个对象如 '湖北': ['武汉', '宜昌', '黄冈'] 对应了一个对象
3. 子列表中的values属性，defaultIndex，name对应父列表中数组的值 如 '湖北': ['武汉', '宜昌', '黄冈'] 对应 ['湖北', '北京', '四川']中的第一项
4. 父子关系通过parentName及name来体现，parentName只能有一个，但是name可以有多个，类似于一个人可以是多个孩子的父亲但是每个孩子称呼他可能不一样，但是孩子只有一个父亲
5. 相对于普通列表改动 新增name parentName字段，name可以是字符串或对象；values可能是对象，defaultIndex可能是对象，其他属性参考普通列表
6. 每个name都是唯一的

属性|数据类型|作用|是否必填|备注
---|---|---|---|---
values|Array or Object|用于展示值列（内容列）|与content必填一个|优先度高于content，当同时设置values content将作为值列
content|String|用于间隔（分割列）|与values必填一个|支持html片段
defaultIndex|Number or Object|定义默认值，对应到values中数组下标|否|默认值为0，联动列表有父列表项为对象，不填每一项默认值均为0
flex|Number|用于计算横向空间分配|否|默认值为1
align|String|值或内容对其方式（即text—align）|否|默认为‘center’
name|String or Object|用于定义列表名称，对应子列表的parentName|在联动列表中拥有子列表的列表必填|仅适用于联动列表，name唯一，即不能出现相同name的项
parentName|String|用于查找父列表|在联动列表中拥有父列表的列表必填|仅适用于联动列表


备注：理论上将，picker支持同时拥有多个多级联动列表 类似 北京 － 朝阳 －－ 湖北 － 武汉  
也支持联动列表与普通列表混合使用 类似 北京 － 朝阳 12点 ： 24 分


### 动态校验
在列表中进行校验是很正常的事，如果交给父组件校验显得非常笨重，毕竟我们不希望每次组件更新值后父组件来计算新的itemList，虽然picker组件确实watch了itemList变化
笔者的初衷只是当一个一个页面服用picker，然后更换itemList，而不是校验后来更新defaultIndex甚至某个列表，因此提供了limitMethods属性来定义校验规则  
如：有一个 xx － xx的列表，我们希望后者不能小于前者，并且前值优先后者（如，前者滚动了，后者跟着滚动，后者滚动到非法值会重置）  
limitMethods值为一个函数，普通列表会传入两个参数，第一个参数是当前值下标组成的数组，第二个值为当前变化的值列下标  
```JavaScript
[
  {
    values:[1,2,3,4]
  },
  {
    content:'-'
  },
  {
    values:[1,2,3,4]
  }
]
//第一列对应的值列下标为0，第三列对应的值列下标是1，即忽略分割列所占用的下标。主要是方便使用者关注数据项
//第一个参数是对应值列当前值下标如[0,1] 那么此事页面上展示为1 - 2

// 校验要求如上
function (arr, ind) {
  if (arr[0] > arr[1]) {
    return [arr[0], arr[0]]
  } else {
    return [arr[0], arr[1]]
  }
}
//如果第一列值列滚动到3而第二列值列小于3需要滚动到3（马上执行） 如果第一列值列此时是3，第二列值列滚动到2，那么第二列值列会在滚动（touch）结束后滚动到3
```
注：每次滚动一格（更改了当前值），都会校验，如果该列无touch事件会立马滚动到合法位置，如果处于touch事件会在touchend后滚动到合法位置
在联动列表参数略微有变化
[{value: xx, index:xx}...],value为当前列下标，index为当前列对应的下标，第二个参数为滚动列在itemList中下标  
这样做主要是方便调用者知道每个下标对应的列（毕竟值列可能有12列，而展示在页面上的可能只有三列）
### 属性
|属性名|数据类型|作用|是否必填|备注
---|---|---|---|---
itemList|Array|展示|是|详情见[数据解构](#数据解构)
limitMethods|Function|校验|否|详情见[动态校验](#动态校验)
showLine|Number|规定列表展示的行数（竖向）|否|默认为5行
eventName|String|监听事件名|否|默认为change，默认滑动结束且发生变化就发送
itemHeight|Number|规定每一列高度|否|默认为30（单位：px）
active|Boolean|发送事件条件|否|默认为false滑动结束发送事件，true则每改变一次某列下标就发送
### 事件监听
一般情况下监听change事件，如果将action设置为true每次滑动变化都发送  
事件接受参数，类似limitMethods，如果是普通列表即值列当前值下标组成的数组，如果是联动列表则是值列当前下标和值列对应itemData下标组成的对象数组
```JavaScript
[2, 3, 0]// 普通列表 值列当前值下标分别为2， 3， 0
[{value: 2, index:2},{value: 3, index: 3}] // 在itemList中下标为2的当前值为2...
```
***
[toTop](#目录)  
[backToIndex](../../../../../ReadMe.md)
